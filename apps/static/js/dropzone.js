(function(){var c=Object.prototype.hasOwnProperty;function d(b,j,l){var a=d.resolve(b);if(null==a){l=l||b;j=j||"root";var i=new Error('Failed to require "'+l+'" from "'+j+'"');i.path=l;i.parent=j;i.require=true;throw i}var k=d.modules[a];if(!k.exports){k.exports={};k.client=k.component=true;k.call(this,k.exports,d.relative(a),k)}return k.exports}d.modules={};d.aliases={};d.resolve=function(h){var b=h+"/index.js";var g=[h,h+".js",h+".json",h+"/index.js",h+"/index.json"];for(var a=0;a<g.length;a++){var h=g[a];if(c.call(d.modules,h)){return h}}if(c.call(d.aliases,b)){return d.aliases[b]}};d.normalize=function(g,h){var b=[];if("."!=h.charAt(0)){return h}g=g.split("/");h=h.split("/");for(var a=0;a<h.length;++a){if(".."==h[a]){g.pop()}else{if("."!=h[a]&&""!=h[a]){b.push(h[a])}}}return g.concat(b).join("/")};d.register=function(a,b){d.modules[a]=b};d.alias=function(a,b){if(!c.call(d.modules,a)){throw new Error('Failed to alias "'+a+'", it does not exist')}d.aliases[b]=a};d.relative=function(a){var g=d.normalize(a,"..");function b(i,e){var f=i.length;while(f--){if(i[f]===e){return f}}return -1}function h(e){var f=h.resolve(e);return d(f,a,e)}h.resolve=function(e){if("."!=e.charAt(0)){var i=a.split("/");var f=b(i,"deps")+1;if(!f){f=0}e=i.slice(0,f+1).join("/")+"/deps/"+e;return e}return d.normalize(g,e)};h.exists=function(e){return c.call(d.modules,h.resolve(e))};return h};d.register("component-emitter/index.js",function(b,a,j){j.exports=i;function i(e){if(e){return h(e)}}function h(e){for(var f in i.prototype){e[f]=i.prototype[f]}return e}i.prototype.on=function(e,f){this._callbacks=this._callbacks||{};(this._callbacks[e]=this._callbacks[e]||[]).push(f);return this};i.prototype.once=function(e,f){var g=this;this._callbacks=this._callbacks||{};function l(){g.off(e,l);f.apply(this,arguments)}f._off=l;this.on(e,l);return this};i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,g){this._callbacks=this._callbacks||{};var f=this._callbacks[e];if(!f){return this}if(1==arguments.length){delete this._callbacks[e];return this}var l=f.indexOf(g._off||g);if(~l){f.splice(l,1)}return this};i.prototype.emit=function(g){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),m=this._callbacks[g];if(m){m=m.slice(0);for(var n=0,f=m.length;n<f;++n){m[n].apply(this,e)}}return this};i.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks[e]||[]};i.prototype.hasListeners=function(e){return !!this.listeners(e).length}});d.register("dropzone/index.js",function(f,b,a){a.exports=b("./lib/dropzone.js")});d.register("dropzone/lib/dropzone.js",function(f,b,a){(function(){var s,o,t,e,q,r={}.hasOwnProperty,n=function(g,i){for(var j in i){if(r.call(i,j)){g[j]=i[j]}}function h(){this.constructor=g}h.prototype=i.prototype;g.prototype=new h();g.__super__=i.prototype;return g},p=[].slice;e=typeof jQuery!=="undefined"&&jQuery!==null?jQuery:b("jquery");o=typeof Emitter!=="undefined"&&Emitter!==null?Emitter:b("emitter");s=(function(g){n(h,g);h.prototype.version="1.3.5";h.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","selectedfiles","addedfile","thumbnail","error","processingfile","uploadprogress","sending","success","complete","response"];h.prototype.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];h.prototype.defaultOptions={url:null,parallelUploads:2,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:2,thumbnailWidth:100,thumbnailHeight:100,clickable:true,accept:function(i,j){return j()},fallback:function(){this.element.addClass("browser-not-supported");this.element.find(".message").removeClass("default");this.element.find(".message span").html("Your browser does not support drag'n'drop file uploads.");this.element.append("Please use the fallback form below to upload your files like in the olden days.</p>");return this.element.append(this.getFallbackForm())},drop:function(i){return this.element.removeClass("drag-hover")},dragstart:e.noop,dragend:function(i){return this.element.removeClass("drag-hover")},dragenter:function(i){return this.element.addClass("drag-hover")},dragover:function(i){return this.element.addClass("drag-hover")},dragleave:function(i){return this.element.removeClass("drag-hover")},selectedfiles:function(i){return this.element.addClass("started")},addedfile:function(i){},thumbnail:function(j,i){},error:function(j,i){},processingfile:function(i){},uploadprogress:function(i,j){},sending:e.noop,success:function(i){},complete:e.noop,previewTemplate:""};function h(k,l){var m,v,i,j;this.element=e(k);if(this.element.length!==1){throw new Error("You can only instantiate dropzone on a single element.")}if(this.element.data("dropzone")){throw new Error("Dropzone already attached.")}this.element.data("dropzone",this);m=this.element.attr("id");v=(j=(m?h.options[t(m)]:void 0))!=null?j:{};this.elementTagName=this.element.get(0).tagName;i=function(){var C,D,H,G,E,F,u;G=arguments[0],H=2<=arguments.length?p.call(arguments,1):[];for(F=0,u=H.length;F<u;F++){D=H[F];for(C in D){E=D[C];G[C]=E}}return G};this.options=i({},this.defaultOptions,v,l!=null?l:{});if(this.options.url==null){this.options.url=this.element.attr("action")}if(!this.options.url){throw new Error("No URL provided.")}this.init()}h.prototype.init=function(){var l,w,j,m,k,x,i=this;if(this.elementTagName==="form"&&this.element.attr("enctype")!=="multipart/form-data"){this.element.attr("enctype","multipart/form-data")}if(this.element.find(".message").length===0){}l=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData){k=this.blacklistedBrowsers;for(j=0,m=k.length;j<m;j++){w=k[j];if(w.test(navigator.userAgent)){l=false;continue}}}else{l=false}if(!l){return this.options.fallback.call(this)}if(this.options.clickable){this.element.addClass("clickable");this.hiddenFileInput=e('<input type="file" />');this.element.click(function(v){var u;u=e(v.target);if(u.is(i.element)||u.is(i.element.find(".message"))){return i.hiddenFileInput.click()}});this.hiddenFileInput.change(function(){var u;u=i.hiddenFileInput.get(0).files;i.emit("selectedfiles",u);if(u.length){return i.handleFiles(u)}})}this.files=[];this.files.queue=[];this.files.processing=[];this.URL=(x=window.URL)!=null?x:window.webkitURL;return this.setupEventListeners()};h.prototype.getFallbackForm=function(){var i;i=e('<div class="fallback-elements"><input type="file" name="'+this.options.paramName+'" /><button type="submit">Upload!</button></div>');if(this.elementTagName!=="FORM"){i=e('<form action="'+this.options.url+'" enctype="multipart/form-data" method="post"></form>').append(i)}else{if(!this.element.attr("enctype")){this.element.attr("enctype","multipart/form-data")}if(!this.element.attr("method")){this.element.attr("method","post")}}return i};h.prototype.setupEventListeners=function(){var k,j,m,v,l,i=this;l=this.events;for(m=0,v=l.length;m<v;m++){k=l[m];this.on(k,this.options[k])}j=function(u){u.stopPropagation();return u.preventDefault()};this.element.on("dragstart",function(u){return i.emit("dragstart",u)});this.element.on("dragenter",function(u){j(u);return i.emit("dragenter",u)});this.element.on("dragover",function(u){j(u);return i.emit("dragover",u)});this.element.on("dragleave",function(u){return i.emit("dragleave",u)});this.element.on("drop",function(u){j(u);i.drop(u);return i.emit("drop",u)});return this.element.on("dragend",function(u){return i.emit("dragend",u)})};h.prototype.filesize=function(i){var j;if(i>=100000000000){i=i/100000000000;j="TB"}else{if(i>=100000000){i=i/100000000;j="GB"}else{if(i>=100000){i=i/100000;j="MB"}else{if(i>=100){i=i/100;j="KB"}else{i=i*10;j="b"}}}}return"<strong>"+(Math.round(i)/10)+"</strong> "+j};h.prototype.drop=function(i){var j;if(!i.originalEvent.dataTransfer){return}j=i.originalEvent.dataTransfer.files;this.emit("selectedfiles",j);if(j.length){return this.handleFiles(j)}};h.prototype.handleFiles=function(j){var k,i,l,m;m=[];for(i=0,l=j.length;i<l;i++){k=j[i];m.push(this.addFile(k))}return m};h.prototype.accept=function(i,j){if(i.size>this.options.maxFilesize*1024*1024){return j("File is too big ("+(Math.round(i.size/1024/10.24)/100)+"MB). Max filesize: "+this.options.maxFilesize+"MB")}else{return this.options.accept.call(this,i,j)}};h.prototype.addFile=function(j){var i=this;this.files.push(j);this.emit("addedfile",j);if(this.options.createImageThumbnails&&j.type.match(/image.*/)&&j.size<=this.options.maxThumbnailFilesize*1024*1024){this.createThumbnail(j)}return this.accept(j,function(k){if(k){return i.errorProcessing(j,k)}else{i.files.queue.push(j);return i.processQueue()}})};h.prototype.createThumbnail=function(j){var k,i=this;k=new FileReader;k.onload=function(){var l;l=new Image;l.onload=function(){var O,m,I,R,N,K,L,Q,H,J,G,P,M;O=document.createElement("canvas");m=O.getContext("2d");K=0;L=0;N=l.width;I=l.height;O.width=i.options.thumbnailWidth;O.height=i.options.thumbnailHeight;P=0;M=0;G=O.width;H=O.height;R=l.width/l.height;J=O.width/O.height;if(l.height<O.height||l.width<O.width){H=I;G=N}else{if(R>J){I=l.height;N=I*J}else{N=l.width;I=N/J}}K=(l.width-N)/2;L=(l.height-I)/2;M=(O.height-H)/2;P=(O.width-G)/2;m.drawImage(l,K,L,N,I,P,M,G,H);Q=O.toDataURL("image/png");return i.emit("thumbnail",j,Q)};return l.src=k.result};return k.readAsDataURL(j)};h.prototype.processQueue=function(){var j,i,k;i=this.options.parallelUploads;k=this.files.processing.length;j=k;while(j<i){if(!this.files.queue.length){return}this.processFile(this.files.queue.shift());j++}};h.prototype.processFile=function(i){this.files.processing.push(i);this.emit("processingfile",i);return this.uploadFile(i)};h.prototype.uploadFile=function(G){var H,J,j,i,l,D,F,C,m,E,k,I=this;F=new XMLHttpRequest();H=new FormData();H.append(this.options.paramName,G);if(this.elementTagName="FORM"){E=this.element.find("input, textarea, select, button");for(C=0,m=E.length;C<m;C++){i=E[C];j=e(i);l=j.attr("name");if(!j.attr("type")||j.attr("type").toLowerCase()!=="checkbox"||i.checked){H.append(j.attr("name"),j.val())}}}F.open("POST",this.options.url,true);J=function(){return I.errorProcessing(G,F.responseText||("Server responded with "+F.status+" code."))};F.onload=function(u){var v;if(F.status!==200){return J()}else{I.emit("uploadprogress",G,100);v=F.responseText;if(~F.getResponseHeader("content-type").indexOf("application/json")){v=JSON.parse(v)}return I.finished(G,v,u)}};F.onerror=function(){return J()};D=(k=F.upload)!=null?k:F;D.onprogress=function(u){return I.emit("uploadprogress",G,Math.max(0,Math.min(100,(u.loaded/u.total)*100)))};F.setRequestHeader("Accept","application/json");F.setRequestHeader("Cache-Control","no-cache");F.setRequestHeader("X-Requested-With","XMLHttpRequest");F.setRequestHeader("X-File-Name",G.name);this.emit("sending",G,F);return F.send(H)};h.prototype.finished=function(k,j,i){this.files.processing=q(this.files.processing,k);this.emit("success",k,j,i);this.emit("finished",k,j,i);this.emit("complete",k);this.emit("response",j);return this.processQueue()};h.prototype.errorProcessing=function(j,i){this.files.processing=q(this.files.processing,j);this.emit("error",j,i);this.emit("complete",j);return this.processQueue()};return h})(o);s.options={};q=function(g,j){var i,h,k,l;l=[];for(h=0,k=g.length;h<k;h++){i=g[h];if(i!==j){l.push(i)}}return l};t=function(g){return g.replace(/[\-_](\w)/g,function(h){return h[1].toUpperCase()})};e.fn.dropzone=function(g){return this.each(function(){return new s(this,g)})};e(function(){return e(".dropzone").dropzone()});if(typeof a!=="undefined"&&a!==null){a.exports=s}else{window.Dropzone=s}}).call(this)});d.alias("component-emitter/index.js","dropzone/deps/emitter/index.js");if(typeof exports=="object"){module.exports=d("dropzone")}else{if(typeof define=="function"&&define.amd){define(d("dropzone"))}else{window.Dropzone=d("dropzone")}}})();